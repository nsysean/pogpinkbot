<!DOCTYPE html>

<html>

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Discord Oauth2 Tutorial</title>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />


</head>

<body>
	<div id="display_result"></div>

	<a href="https://discord.com/api/oauth2/authorize?client_id=801279877595660299&redirect_uri=http%3A%2F%2F127.0.0.1%3A5500%2F&response_type=code&scope=identify">
	Discord Oauth</a>
	<script>
		window.onload = () => {
			const code = location.href.substring(location.href.indexOf("code")+5, location.href.length)

			if (location.href.indexOf("code") > -1) {
                const req = new XMLHttpRequest()
                req.open("POST", "http://127.0.0.1:5500/")
                req.send(code)
                req.onload = () => {
                    
                    document.getElementById("display_result").innerText = `your username is ${req.responseText}`
                }

			}
		}
	</script>
</body>

</html>